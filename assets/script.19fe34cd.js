const p=async()=>{await WA.onInit(),await WA.players.configureTracking({players:!0,movement:!1});let s=!0,a=!1,o="en",l;WA.room.onEnterLayer("Trigger/Welcome").subscribe(()=>{if(s)l=WA.ui.openPopup("WelcomePopup","Welcome to Pulsar Systems Office !",[]),s=!1;else{const t=[...[{label:"English",symbol:"en"},{label:"French",symbol:"fr"},{label:"Spanish",symbol:"es"}].filter(e=>e.symbol!==o).map(e=>({label:e.label,className:"primary",callback:i=>{o=e.symbol,i.close()}})),{label:a?"Soft mode":"Trash mode",className:"primary",callback:e=>{a=!a,e.close()}}];fetch(`https://v2.jokeapi.dev/joke/Any?lang=${o}&blacklistFlags=${a?"":"racist,sexist,explicit"}`).then(e=>e.json()).then(e=>{e.type==="twopart"?(l=WA.ui.openPopup("WelcomePopup",e.setup,[]),setTimeout(()=>{l.close(),l=WA.ui.openPopup("WelcomePopup",e.delivery,t)},4e3)):l=WA.ui.openPopup("WelcomePopup",e.joke,t)})}}),WA.room.onLeaveLayer("Trigger/Welcome").subscribe(()=>{l.close()}),WA.room.area.create({name:"Jukebox",x:741,y:760,width:436,height:235})};p().then();
