const n=async()=>{await WA.onInit(),await WA.players.configureTracking({players:!0,movement:!1});let t=!0,a=!1,s="en",l,o;WA.room.onEnterLayer("Trigger/Welcome").subscribe(()=>{if(o=!0,t)l=WA.ui.openPopup("WelcomePopup","Welcome to Pulsar Systems Office !",[]),t=!1;else{const i=[...[{label:"English",symbol:"en"},{label:"French",symbol:"fr"},{label:"Spanish",symbol:"es"}].filter(e=>e.symbol!==s).map(e=>({label:e.label,className:"primary",callback:p=>{s=e.symbol,p.close()}})),{label:a?"Soft mode":"Trash mode",className:"primary",callback:e=>{a=!a,e.close()}}];fetch(`https://v2.jokeapi.dev/joke/Any?lang=${s}&blacklistFlags=${a?"":"racist,sexist,explicit"}`).then(e=>e.json()).then(e=>{o&&(e.type==="twopart"?(l=WA.ui.openPopup("WelcomePopup",e.setup,[]),setTimeout(()=>{l.close(),o&&(l=WA.ui.openPopup("WelcomePopup",e.delivery,i))},4e3)):l=WA.ui.openPopup("WelcomePopup",e.joke,i))})}}),WA.room.onLeaveLayer("Trigger/Welcome").subscribe(()=>{o=!1,l.close()}),WA.room.area.create({name:"Jukebox",x:741,y:760,width:436,height:235})};n().then();
