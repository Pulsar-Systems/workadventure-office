const n=async()=>{await WA.onInit(),await WA.players.configureTracking({players:!0,movement:!1});let c=!0,l=!1,r="en",a;WA.room.onEnterLayer("Trigger/Welcome").subscribe(()=>{if(c)a=WA.ui.openPopup("WelcomePopup","Welcome to Pulsar Systems Office !",[]),c=!1;else{const i=[...[{label:"English",symbol:"en"},{label:"French",symbol:"fr"},{label:"Spanish",symbol:"es"}].filter(e=>e.symbol!==r).map(e=>({label:e.label,className:"primary",callback:m=>{r=e.symbol,m.close()}})),{label:l?"Soft mode":"Trash mode",className:"primary",callback:e=>{l=!l,e.close()}}];fetch(`https://v2.jokeapi.dev/joke/Any?lang=${r}&blacklistFlags=${l?"":"racist,sexist,explicit"}`).then(e=>e.json()).then(e=>{e.type==="twopart"?(a=WA.ui.openPopup("WelcomePopup",e.setup,[]),setTimeout(()=>{a.close(),a=WA.ui.openPopup("WelcomePopup",e.delivery,i)},4e3)):a=WA.ui.openPopup("WelcomePopup",e.joke,i)})}}),WA.room.onLeaveLayer("Trigger/Welcome").subscribe(()=>{a.close()});const t=WA.room.area.create({name:"Juckbox",x:741,y:760,width:436,height:229}),u=[{name:"Jimmy Punchline",file:"music/jimmy-punchline.mp3"},{name:"Gangnam Style",file:"music/gangnam-style.mp3"}];let p,s;WA.room.onEnterLayer("Trigger/Jukebox").subscribe(()=>{p=WA.ui.openPopup("JukeboxPopup","Jukebox",[...u.map(o=>({label:o.name,className:"primary",callback:i=>{t.setProperty("playAudio",o.file),WA.room.showLayer("disco"),clearTimeout(s),s=setTimeout(()=>WA.room.hideLayer("disco"),2e4),WA.player.state.saveVariable("Jukebox",o.file,{public:!0,persist:!1,scope:"room"}),i.close()}})),{label:"Stop",className:"primary",callback:o=>{t.setProperty("playAudio",void 0),WA.room.hideLayer("disco"),WA.player.state.saveVariable("Jukebox",void 0,{public:!0,persist:!1,scope:"room"}),o.close()}}])}),WA.room.onLeaveLayer("Trigger/Jukebox").subscribe(()=>{p.close()}),WA.players.onVariableChange("Jukebox").subscribe(o=>{t.setProperty("playAudio",o.value),o.value?(WA.room.showLayer("disco"),clearTimeout(s),s=setTimeout(()=>WA.room.hideLayer("disco"),2e4)):WA.room.hideLayer("disco")})};n().then();
